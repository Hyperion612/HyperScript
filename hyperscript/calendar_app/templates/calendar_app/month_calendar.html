{% extends 'base.html' %}

{% block title %}{{ month_name }} {{ year }} - Study Assistant{% endblock %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>üìÖ {{ month_name }} {{ year }}</h1>
        <div>
            <a href="{% url 'year_calendar' %}" class="btn btn-outline-secondary">–ù–∞–∑–∞–¥ –∫ –≥–æ–¥–∞–º</a>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-light">
            <div class="row text-center fw-bold">
                <div class="col">–ü–Ω</div>
                <div class="col">–í—Ç</div>
                <div class="col">–°—Ä</div>
                <div class="col">–ß—Ç</div>
                <div class="col">–ü—Ç</div>
                <div class="col">–°–±</div>
                <div class="col">–í—Å</div>
            </div>
        </div>
        <div class="card-body p-0">
            {% for week in calendar %}
            <div class="row week-row">
                {% for day in week %}
                <div class="col day-cell p-2 border {% if day == 0 %}bg-light{% endif %} 
                    {% if is_current_month and day == today.day %}bg-warning{% endif %}">
                    {% if day != 0 %}
                    <div class="day-number {% if is_current_month and day == today.day %}fw-bold text-dark{% endif %}">
                        {{ day }}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º -->
    <div class="d-flex justify-content-between mt-4">
        {% with prev_month=month|add:"-1" next_month=month|add:"1" %}
            {% if prev_month > 0 %}
                <a href="{% url 'month_calendar' year prev_month %}" class="btn btn-primary">‚Üê {{ prev_month|stringformat:"02d" }}</a>
            {% else %}
                <a href="{% url 'month_calendar' year|add:"-1" 12 %}" class="btn btn-primary">‚Üê –î–µ–∫ {{ year|add:"-1" }}</a>
            {% endif %}
            
            {% if next_month < 13 %}
                <a href="{% url 'month_calendar' year next_month %}" class="btn btn-primary">{{ next_month|stringformat:"02d" }} ‚Üí</a>
            {% else %}
                <a href="{% url 'month_calendar' year|add:"1" 1 %}" class="btn btn-primary">–Ø–Ω–≤ {{ year|add:"1" }} ‚Üí</a>
            {% endif %}
        {% endwith %}
    </div>
</div>

<style>
.week-row {
    min-height: 80px;
}
.day-cell {
    aspect-ratio: 1;
}
.day-number {
    font-size: 1.1em;
}
</style>
{% endblock %}