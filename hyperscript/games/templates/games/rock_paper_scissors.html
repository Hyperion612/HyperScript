{% extends 'base.html' %}

{% block title %}–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞ - HyperScript{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">üéÆ –ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞</h3>
                </div>
                
                <div class="card-body text-center">
                    
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="row mb-4">
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ü–æ–±–µ–¥—ã</small>
                                <div class="h4 mb-0 text-success" id="wins">0</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ü–æ—Ä–∞–∂–µ–Ω–∏—è</small>
                                <div class="h4 mb-0 text-danger" id="losses">0</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ù–∏—á—å–∏</small>
                                <div class="h4 mb-0 text-warning" id="draws">0</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ -->
                    <div class="mb-4" id="startSection">
                        <button class="btn btn-success btn-lg" id="startBtn" onclick="startGame()">
                            üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                    </div>
                    
                    <!-- –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å (—Å–∫—Ä—ã—Ç–∞ —Å–Ω–∞—á–∞–ª–∞) -->
                    <div id="gameSection" style="display: none;">
                        <div class="mb-4">
                            <h5>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ö–æ–¥:</h5>
                            <div class="btn-group btn-group-lg" role="group">
                                <button type="button" class="btn btn-outline-primary" onclick="play('rock')">
                                    ‚úä –ö–∞–º–µ–Ω—å
                                </button>
                                <button type="button" class="btn btn-outline-success" onclick="play('paper')">
                                    ‚úã –ë—É–º–∞–≥–∞
                                </button>
                                <button type="button" class="btn btn-outline-warning" onclick="play('scissors')">
                                    ‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç (—Å–∫—Ä—ã—Ç —Å–Ω–∞—á–∞–ª–∞) -->
                    <div id="resultSection" style="display: none;">
                        <div class="mb-4">
                            <h3 id="resultMessage"></h3>
                            <div class="row align-items-center mt-3">
                                <div class="col-5 text-end">
                                    <div class="h2" id="playerChoice"></div>
                                    <small>–í–∞—à –≤—ã–±–æ—Ä</small>
                                </div>
                                <div class="col-2">
                                    <div class="h4 text-muted">VS</div>
                                </div>
                                <div class="col-5 text-start">
                                    <div class="h2" id="computerChoice"></div>
                                    <small>–ö–æ–º–ø—å—é—Ç–µ—Ä</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-block">
                            <button class="btn btn-primary btn-lg me-2" onclick="playAgain()">
                                üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                            </button>
                            <button class="btn btn-outline-secondary btn-lg" onclick="backToMenu()">
                                üìã –í –º–µ–Ω—é
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–∞–≤–∏–ª–∞ -->
                    <div class="mt-4">
                        <div class="alert alert-info">
                            <h5>üìã –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h5>
                            <ul class="mb-0">
                                <li><strong>‚úä –ö–∞–º–µ–Ω—å</strong> –±—å–µ—Ç <strong>‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã</strong></li>
                                <li><strong>‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã</strong> –±—å—é—Ç <strong>‚úã –ë—É–º–∞–≥—É</strong></li>
                                <li><strong>‚úã –ë—É–º–∞–≥–∞</strong> –±—å–µ—Ç <strong>‚úä –ö–∞–º–µ–Ω—å</strong></li>
                                <li>–û–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤—ã–±–æ—Ä = <strong>–ù–∏—á—å—è!</strong></li>
                            </ul>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π JavaScript -->
<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let wins = 0;
let losses = 0;
let draws = 0;

// –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
function startGame() {
    console.log('–ò–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞!');
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    wins = 0;
    losses = 0;
    draws = 0;
    updateStats();
    
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω—ã
    document.getElementById('startSection').style.display = 'none';
    document.getElementById('gameSection').style.display = 'block';
    document.getElementById('resultSection').style.display = 'none';
}

function play(playerChoice) {
    console.log('–ò–≥—Ä–æ–∫ –≤—ã–±—Ä–∞–ª:', playerChoice);
    
    // –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
    const choices = ['rock', 'paper', 'scissors'];
    const choiceNames = {
        'rock': '‚úä –ö–∞–º–µ–Ω—å',
        'paper': '‚úã –ë—É–º–∞–≥–∞',
        'scissors': '‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã'
    };
    
    // –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ
    const computerChoice = choices[Math.floor(Math.random() * 3)];
    console.log('–ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–±—Ä–∞–ª:', computerChoice);
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤—ã–±–æ—Ä—ã
    document.getElementById('playerChoice').textContent = choiceNames[playerChoice];
    document.getElementById('computerChoice').textContent = choiceNames[computerChoice];
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    let result = '';
    let resultClass = '';
    
    if (playerChoice === computerChoice) {
        result = 'ü§ù –ù–∏—á—å—è!';
        resultClass = 'warning';
        draws++;
        console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∏—á—å—è');
    } else if (
        (playerChoice === 'rock' && computerChoice === 'scissors') ||
        (playerChoice === 'scissors' && computerChoice === 'paper') ||
        (playerChoice === 'paper' && computerChoice === 'rock')
    ) {
        result = 'üéâ –í—ã –ø–æ–±–µ–¥–∏–ª–∏!';
        resultClass = 'success';
        wins++;
        console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–±–µ–¥–∞ –∏–≥—Ä–æ–∫–∞');
    } else {
        result = 'üíª –ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–±–µ–¥–∏–ª!';
        resultClass = 'danger';
        losses++;
        console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–±–µ–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    updateStats();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    document.getElementById('resultMessage').textContent = result;
    document.getElementById('resultMessage').className = 'alert alert-' + resultClass;
    
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω—ã
    document.getElementById('gameSection').style.display = 'none';
    document.getElementById('resultSection').style.display = 'block';
}

function updateStats() {
    document.getElementById('wins').textContent = wins;
    document.getElementById('losses').textContent = losses;
    document.getElementById('draws').textContent = draws;
}

function playAgain() {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ –≤—ã–±–æ—Ä—É —Ö–æ–¥–∞
    document.getElementById('gameSection').style.display = 'block';
    document.getElementById('resultSection').style.display = 'none';
}

function backToMenu() {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —ç–∫—Ä–∞–Ω—É
    document.getElementById('startSection').style.display = 'block';
    document.getElementById('gameSection').style.display = 'none';
    document.getElementById('resultSection').style.display = 'none';
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
console.log('‚úÖ –ò–≥—Ä–∞ "–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞" –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞!');
</script>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä—ã */
.btn {
    transition: all 0.2s ease;
    margin: 5px;
    min-width: 120px;
}

.btn:hover {
    transform: scale(1.05);
}

#playerChoice, #computerChoice {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

.alert {
    border-radius: 10px;
    padding: 15px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .btn-group-lg {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
        margin: 5px 0;
    }
    
    #playerChoice, #computerChoice {
        font-size: 2rem;
    }
}
</style>
{% endblock %}