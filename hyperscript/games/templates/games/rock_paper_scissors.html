{% extends 'base.html' %}

{% block title %}–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞ - HyperScript{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">üéÆ –ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞</h3>
                </div>
                <div class="card-body text-center">
                    <div class="row mb-4">
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ü–æ–±–µ–¥—ã</small>
                                <div class="h4 mb-0 text-success" id="wins">0</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ü–æ—Ä–∞–∂–µ–Ω–∏—è</small>
                                <div class="h4 mb-0 text-danger" id="losses">0</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded p-2">
                                <small>–ù–∏—á—å–∏</small>
                                <div class="h4 mb-0 text-warning" id="draws">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ö–æ–¥:</h5>
                        <div class="btn-group btn-group-lg" role="group">
                            <button type="button" class="btn btn-outline-primary choice-btn" data-choice="rock">
                                ‚úä –ö–∞–º–µ–Ω—å
                            </button>
                            <button type="button" class="btn btn-outline-success choice-btn" data-choice="paper">
                                ‚úã –ë—É–º–∞–≥–∞
                            </button>
                            <button type="button" class="btn btn-outline-warning choice-btn" data-choice="scissors">
                                ‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã
                            </button>
                        </div>
                    </div>

                    <div id="resultArea" style="display: none;">
                        <div class="row align-items-center mb-4">
                            <div class="col-5 text-end">
                                <div class="h4" id="userChoice"></div>
                                <small>–í—ã</small>
                            </div>
                            <div class="col-2">
                                <div class="h3">VS</div>
                            </div>
                            <div class="col-5 text-start">
                                <div class="h4" id="computerChoice"></div>
                                <small>–ö–æ–º–ø—å—é—Ç–µ—Ä</small>
                            </div>
                        </div>

                        <div class="alert" id="resultAlert">
                            <h4 id="resultText" class="mb-0"></h4>
                        </div>

                        <button class="btn btn-primary btn-lg mt-3" id="playAgain">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                    </div>

                    <div id="startArea">
                        <div class="py-4">
                            <i class="fas fa-hand-rock fa-4x text-muted mb-3"></i>
                            <h4>–°–¥–µ–ª–∞–π—Ç–µ –≤–∞—à –≤—ã–±–æ—Ä!</h4>
                            <p class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–º–µ–Ω—å, –Ω–æ–∂–Ω–∏—Ü—ã –∏–ª–∏ –±—É–º–∞–≥—É —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const choiceBtns = document.querySelectorAll('.choice-btn');
    const startArea = document.getElementById('startArea');
    const resultArea = document.getElementById('resultArea');
    const userChoiceEl = document.getElementById('userChoice');
    const computerChoiceEl = document.getElementById('computerChoice');
    const resultAlert = document.getElementById('resultAlert');
    const resultText = document.getElementById('resultText');
    const playAgainBtn = document.getElementById('playAgain');
    const winsEl = document.getElementById('wins');
    const lossesEl = document.getElementById('losses');
    const drawsEl = document.getElementById('draws');
    
    let wins = 0, losses = 0, draws = 0;
    
    choiceBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const userChoice = this.dataset.choice;
            playRound(userChoice);
        });
    });
    
    playAgainBtn.addEventListener('click', function() {
        startArea.style.display = 'block';
        resultArea.style.display = 'none';
    });
    
    function playRound(userChoice) {
        const choices = ['rock', 'paper', 'scissors'];
        const computerChoice = choices[Math.floor(Math.random() * 3)];
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
        let result, message;
        
        if (userChoice === computerChoice) {
            result = 'draw';
            message = '–ù–∏—á—å—è!';
            draws++;
        } else if (
            (userChoice === 'rock' && computerChoice === 'scissors') ||
            (userChoice === 'scissors' && computerChoice === 'paper') ||
            (userChoice === 'paper' && computerChoice === 'rock')
        ) {
            result = 'win';
            message = '–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ';
            wins++;
        } else {
            result = 'lose';
            message = '–ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–±–µ–¥–∏–ª! üíª';
            losses++;
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        updateStats();
        displayResult(userChoice, computerChoice, result, message);
    }
    
    function updateStats() {
        winsEl.textContent = wins;
        lossesEl.textContent = losses;
        drawsEl.textContent = draws;
    }
    
    function displayResult(userChoice, computerChoice, result, message) {
        const choiceNames = {
            'rock': '‚úä –ö–∞–º–µ–Ω—å',
            'paper': '‚úã –ë—É–º–∞–≥–∞', 
            'scissors': '‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã'
        };
        
        userChoiceEl.textContent = choiceNames[userChoice];
        computerChoiceEl.textContent = choiceNames[computerChoice];
        
        if (result === 'win') {
            resultAlert.className = 'alert alert-success';
        } else if (result === 'lose') {
            resultAlert.className = 'alert alert-danger';
        } else {
            resultAlert.className = 'alert alert-warning';
        }
        
        resultText.textContent = message;
        
        startArea.style.display = 'none';
        resultArea.style.display = 'block';
    }
});
</script>
{% endblock %}